<!doctype html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>DetailHQ</title>
  <link rel="icon" type="image/png" href="app_icon.PNG" />
  <link rel="apple-touch-icon" href="app_icon.PNG" />
  <meta name="theme-color" content="#000000" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- Supabase JS -->
  <script src="https://unpkg.com/@supabase/supabase-js@2.48.0/dist/umd/supabase.js"></script>
</head>
<body class="theme-system">
  <div id="app-root">
    <!-- AUTH VIEW -->
    <div id="auth-view" class="view active">
      <div class="auth-card glass">
        <div class="auth-logo-row">
          <img src="logo_icon.png" alt="DetailHQ Logo" class="app-logo" />
          <div>
            <h1 class="app-title">DetailHQ</h1>
            <p class="app-subtitle">
              Backoffice f√ºr Fahrzeugaufbereitung ‚Äì Preise, Auftr√§ge, Kalender.
            </p>
          </div>
        </div>

        <form id="login-form" class="form">
          <label class="field-label" for="login-email">E-Mail</label>
          <input id="login-email" type="email" class="field-input" autocomplete="email" required />

          <label class="field-label" for="login-password">Passwort</label>
          <input id="login-password" type="password" class="field-input" autocomplete="current-password" required />

          <button type="submit" class="btn btn-primary" id="login-button">
            Anmelden
          </button>

          <button type="button" class="link-button" id="password-reset-button">
            Passwort vergessen?
          </button>

          <p class="form-hint">
            Noch kein Konto?
            <button type="button" class="link-button" id="register-switch">
              Jetzt registrieren
            </button>
          </p>
        </form>

        <form id="register-form" class="form hidden">
          <div class="auth-info-banner">
            <strong>3 Tage kostenlos testen.</strong><br />
            Keine Zahlungsmethode n√∂tig f√ºr die Testphase.
          </div>

          <label class="field-label" for="register-email">E-Mail</label>
          <input id="register-email" type="email" class="field-input" autocomplete="email" required />

          <label class="field-label" for="register-password">Passwort</label>
          <input id="register-password" type="password" class="field-input" autocomplete="new-password" required />

          <button type="submit" class="btn btn-primary" id="register-button">
            Konto erstellen
          </button>

          <p class="form-hint">
            Bereits ein Konto?
            <button type="button" class="link-button" id="login-switch">
              Zur Anmeldung
            </button>
          </p>
        </form>

        <p id="auth-error" class="error-text"></p>
      </div>
    </div>

    <!-- APP VIEW -->
    <div id="app-view" class="view">
      <!-- HEADER MIT PROFIL -->
      <header class="app-header glass">
        <div class="header-left">
          <img src="logo_icon.png" alt="DetailHQ Logo" class="header-logo" />
          <div>
            <h2 id="header-title">Dashboard</h2>
            <p id="header-subtitle" class="header-subtitle">
              √úbersicht √ºber deine Auftr√§ge und Ums√§tze.
            </p>
          </div>
        </div>

        <div class="profile-wrapper">
          <button id="profile-button" class="icon-button profile-avatar" title="Profil">
            <img
              id="profile-avatar-image"
              src="pfp.png"
              alt="Profilbild"
              class="profile-avatar-image"
            />
          </button>
          <div id="profile-menu" class="profile-menu hidden">
            <button id="profile-manage-button" class="profile-menu-item">
              Profil verwalten
            </button>
            <button id="profile-logout-button" class="profile-menu-item danger">
              Abmelden
            </button>
          </div>
        </div>
      </header>

      <div id="trial-banner" class="trial-banner hidden">
        <span id="trial-banner-text"></span>
        <button id="trial-banner-button" class="trial-banner-button">
          Jetzt Abo starten
        </button>
      </div>

      <main class="app-main">
        <!-- DASHBOARD -->
        <section id="tab-dashboard" class="tab-section active">
      <!-- Zeitraum-Toggle √ºber beiden Feldern -->
      <div class="dashboard-period-row">
        <div class="dashboard-period-toggle" id="dashboard-period-toggle">
          <button class="period-chip active" data-period="today">Heute</button>
          <button class="period-chip" data-period="week">Woche</button>
          <button class="period-chip" data-period="month">Monat</button>
          <button class="period-chip" data-period="year">Jahr</button>
        </div>
      </div>

      <!-- Zwei Felder: links Umsatz, rechts Auftragsvolumen -->
      <div class="cards-grid cards-grid-2">
        <div class="card glass">
          <p class="card-label">Umsatz</p>
          <!-- Wird aktuell weiter von main.js √ºber id="revenue-today" beschrieben (heute).
               Logik f√ºr Woche/Monat/Jahr machen wir sp√§ter in main.js. -->
          <p class="card-value" id="revenue-today">‚Ç¨ 0</p>
        </div>

        <div class="card glass">
          <p class="card-label">Auftragsvolumen</p>
          <!-- Placeholder-ID f√ºr Logik sp√§ter -->
          <p class="card-value" id="volume-today">‚Ç¨ 0</p>
        </div>
      </div>

      <!-- Versteckte alte Umsatz-IDs, damit main.js nicht crasht, bis wir Logik anpassen -->
      <div style="display:none;">
        <span id="revenue-week"></span>
        <span id="revenue-14days"></span>
        <span id="revenue-month"></span>
      </div>

          <div class="section-header">
            <h3>Heutige Auftr√§ge</h3>
            <button id="new-booking-button" class="btn btn-secondary btn-small">
              Neuer Auftrag
            </button>
          </div>
          <div id="today-bookings" class="list-container empty-state">
            <p>Noch keine Auftr√§ge f√ºr heute.</p>
          </div>

          <div class="section-header">
            <h3>Bewertungen f√§llig</h3>
          </div>
          <div id="review-reminders" class="list-container empty-state">
            <p>Aktuell keine offenen Bewertungs-Erinnerungen.</p>
          </div>
        </section>

        <!-- SCHEDULE -->
        <section id="tab-schedule" class="tab-section">
          <div class="section-header">
            <h3>Zeitplan</h3>
            <button id="new-booking-button-2" class="btn btn-secondary btn-small">
              Neuer Auftrag
            </button>
          </div>
          <div id="schedule-list" class="list-container empty-state">
            <p>Noch keine geplanten Auftr√§ge.</p>
          </div>
        </section>

        <!-- SETTINGS -->
        <section id="tab-settings" class="tab-section">
          <!-- THEME -->
          <div class="settings-group glass">
            <h3>Erscheinungsbild</h3>
            <p class="settings-help">W√§hle, wie DetailHQ aussehen soll.</p>
            <div class="settings-options">
              <label class="radio-option">
                <input type="radio" name="theme" value="light" />
                <span>Hell</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="theme" value="dark" />
                <span>Dunkel</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="theme" value="system" />
                <span>System</span>
              </label>
            </div>
          </div>

          <!-- DIENSTE & PREISE -->
          <div class="settings-group glass">
            <h3>Dienste & Preise</h3>
            <p class="settings-help">
              Definiere Fahrzeugklassen und Services. Diese nutzt du sp√§ter beim Anlegen von Auftr√§gen.
            </p>

            <!-- Fahrzeugklassen -->
            <h4 class="settings-subtitle">Fahrzeugklassen</h4>

            <!-- Custom Dropdown f√ºr Fahrzeugklassen (UI, kein natives select) -->
            <div class="settings-dropdown">
              <button
                type="button"
                class="settings-dropdown-toggle"
                id="vehicle-classes-dropdown-toggle"
              >
                Fahrzeugklassen anpassen
                <span class="settings-dropdown-chevron">‚ñæ</span>
              </button>

              <!-- Men√º: wird sp√§ter per main.js mit Optionen gef√ºllt.
                   Jede Option kann rechts ein Stift-Icon bekommen. -->
              <div
                id="vehicle-classes-list"
                class="settings-dropdown-menu"
              >
                <p class="form-hint">Noch keine Fahrzeugklassen angelegt.</p>
              </div>
            </div>

            <!-- Button bleibt wie gew√ºnscht unter dem Dropdown -->
            <button class="btn btn-secondary btn-small" id="vehicle-class-add-button">
              Fahrzeugklasse hinzuf√ºgen
            </button>

            <!-- Services -->
            <h4 class="settings-subtitle" style="margin-top:16px;">Services</h4>

            <!-- Custom Dropdown f√ºr Services -->
            <div class="settings-dropdown">
              <button
                type="button"
                class="settings-dropdown-toggle"
                id="services-dropdown-toggle"
              >
                Services anpassen
                <span class="settings-dropdown-chevron">‚ñæ</span>
              </button>

              <!-- Men√º: wird sp√§ter per main.js mit Optionen gef√ºllt.
                   Jede Option kann rechts ein Stift-Icon bekommen. -->
              <div
                id="services-list"
                class="settings-dropdown-menu"
              >
                <p class="form-hint">Noch keine Services angelegt.</p>
              </div>
            </div>

            <!-- Button bleibt wie gew√ºnscht unter dem Dropdown -->
            <button class="btn btn-secondary btn-small" id="service-add-button">
              Service hinzuf√ºgen
            </button>
          </div>

          <!-- Service-Form Modal -->
          <div id="service-modal" class="profile-modal hidden">
            <div class="profile-modal-backdrop"></div>
            <div class="profile-modal-card glass">
              <div class="profile-modal-header">
                <h3 id="service-modal-title">Service bearbeiten</h3>
                <button id="service-modal-close" class="icon-button small" title="Schlie√üen">‚úï</button>
              </div>
              <form id="service-form" class="form">
                <label class="field-label" for="service-kind">Art</label>
                <select id="service-kind" class="field-input" required>
                  <option value="package">Paket</option>
                  <option value="single">Einzelleistung</option>
                </select>

                <label class="field-label" for="service-category">Kategorie (optional)</label>
                <input id="service-category" type="text" class="field-input" placeholder="z.B. Innen, Au√üen, Premium" />

                <label class="field-label" for="service-name">Name</label>
                <input id="service-name" type="text" class="field-input" required />

                <label class="field-label" for="service-price">Basispreis (in ‚Ç¨)</label>
                <input id="service-price" type="number" min="0" step="0.01" class="field-input" required />

                <label class="field-label" for="service-duration">Zeitaufwand (Stunden, optional)</label>
                <input id="service-duration" type="number" min="0" step="0.25" class="field-input" />

                <label class="field-label" for="service-description">Beschreibung (optional)</label>
                <textarea id="service-description" class="field-input" rows="3"></textarea>

                <button type="submit" class="btn btn-primary" style="margin-top:12px;">
                  Speichern
                </button>
              </form>
              <p id="service-modal-error" class="error-text"></p>
            </div>
          </div>

          <!-- Vehicle-Class-Form Modal -->
          <div id="vehicle-class-modal" class="profile-modal hidden">
            <div class="profile-modal-backdrop"></div>
            <div class="profile-modal-card glass">
              <div class="profile-modal-header">
                <h3 id="vehicle-class-modal-title">Fahrzeugklasse bearbeiten</h3>
                <button id="vehicle-class-modal-close" class="icon-button small" title="Schlie√üen">‚úï</button>
              </div>
              <form id="vehicle-class-form" class="form">
                <label class="field-label" for="vehicle-class-name">Name</label>
                <input
                  id="vehicle-class-name"
                  type="text"
                  class="field-input"
                  placeholder="z.B. Kleinwagen, SUV"
                  required
                />

                <label class="field-label" for="vehicle-class-price-delta">
                  Preis-Anpassung (in ‚Ç¨, optional ‚Äì negativ m√∂glich)
                </label>
                <input
                  id="vehicle-class-price-delta"
                  type="number"
                  step="1"
                  class="field-input"
                  value="0"
                />

                <button type="submit" class="btn btn-primary" style="margin-top:12px;">
                  Speichern
                </button>
              </form>
              <p id="vehicle-class-modal-error" class="error-text"></p>
            </div>
          </div>

          <!-- KALENDER -->
          <div class="settings-group glass">
            <h3>Kalender</h3>
            <p class="settings-help">
              Verbinde deinen DetailHQ-Zeitplan mit Apple Kalender oder Google Kalender.
            </p>

            <div class="settings-options">
              <label class="radio-option">
                <input type="radio" name="calendar-preference" value="apple" />
                <span>Apple</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="calendar-preference" value="google" />
                <span>Google</span>
              </label>
            </div>

            <button id="calendar-open-button" class="btn btn-secondary btn-block" style="margin-top: 10px;">
              Im Kalender √∂ffnen
            </button>
          </div>

          <!-- BILLING / STRIPE -->
          <div class="settings-group glass">
            <h3>Zahlung & Abo</h3>
            <p class="settings-help">
              Dein aktueller Tarif, Zahlungsdaten und Wechsel auf Monats-, Jahres- oder Lifetime-Abo.
            </p>
            <button
              class="btn btn-ghost btn-block"
              id="billing-manage-plan-button"
            >
              Abo & Zahlung verwalten (Stripe)
            </button>

            <button
              class="btn btn-secondary btn-block"
              id="billing-subscription-monthly-button"
            >
              Monatsabo starten
            </button>

            <button
              class="btn btn-secondary btn-block"
              id="billing-subscription-yearly-button"
            >
              Jahresabo starten
            </button>

            <button
              class="btn btn-secondary btn-block"
              id="billing-switch-lifetime-button"
            >
              Auf Lifetime wechseln
            </button>
          </div>

          <!-- BEWERTUNGEN -->
          <div class="settings-group glass">
            <h3>Bewertungen</h3>
            <p class="settings-help">
              Hinterlege deinen Google-Profil- oder Bewertungslink f√ºr Erinnerungen nach Auftr√§gen.
            </p>
            <label class="field-label" for="settings-review-link">Google Profil-URL</label>
            <input
              id="settings-review-link"
              type="url"
              class="field-input"
              placeholder="https://www.google.com/maps/place/..."
            />

            <button
              id="settings-review-save-button"
              class="btn btn-secondary"
              style="margin-top: 8px;"
            >
              Speichern
            </button>
            <p id="settings-review-save-status" class="form-hint"></p>
          </div>

          <!-- SUPPORT -->
          <div class="settings-group glass">
            <h3>Support</h3>
            <p class="settings-help">
              Bei Fragen oder Problemen melde dich einfach.
            </p>
            <a href="mailto:support@detailhq.de" class="btn btn-secondary btn-block">
              Support per E-Mail
            </a>
          </div>

          <!-- RECHTLICHES -->
          <div class="settings-group glass">
            <h3>Rechtliches</h3>
            <p class="settings-help">
              Impressum, Datenschutz & rechtliche Hinweise zu DetailHQ.
            </p>
            <a
              href="https://detailhq.de/rechtliches"
              class="btn btn-ghost btn-block"
              target="_blank"
              rel="noopener noreferrer"
            >
              Rechtliches √∂ffnen
            </a>
          </div>
        </section>
      </main>

      <!-- PROFIL MODAL -->
      <div id="profile-modal" class="profile-modal hidden">
        <div class="profile-modal-backdrop"></div>
        <div class="profile-modal-card glass">
          <div class="profile-modal-header">
            <h3>Profil verwalten</h3>
            <button id="profile-close-button" class="icon-button small" title="Schlie√üen">
              ‚úï
            </button>
          </div>
          <form id="profile-form" class="form">
            <label class="field-label" for="profile-name">Name</label>
            <input id="profile-name" type="text" class="field-input" />

            <label class="field-label" for="profile-company">Firma</label>
            <input id="profile-company" type="text" class="field-input" />

            <label class="field-label" for="profile-address">Adresse</label>
            <input id="profile-address" type="text" class="field-input" />

            <label class="field-label" for="profile-avatar-file">Profilbild (optional)</label>
            <input id="profile-avatar-file" type="file" accept="image/*" class="field-input" />

            <button type="submit" class="btn btn-primary">
              Speichern
            </button>
          </form>
          <p id="profile-save-message" class="form-hint"></p>
        </div>
      </div>

      <!-- BUCHUNG / NEUER AUFTRAG MODAL -->
      <div id="booking-modal" class="profile-modal hidden">
        <div class="profile-modal-backdrop"></div>
        <div class="profile-modal-card glass">
          <div class="profile-modal-header">
            <h3>Neuer Auftrag</h3>
            <button id="booking-close-button" class="icon-button small" title="Schlie√üen">‚úï</button>
          </div>

          <!-- Schritt-Indikator -->
          <div class="booking-steps-indicator">
            <span id="booking-step-indicator-1" class="booking-step-indicator active">1. Leistungen</span>
            <span id="booking-step-indicator-2" class="booking-step-indicator">2. Termin</span>
            <span id="booking-step-indicator-3" class="booking-step-indicator">3. Kunde</span>
          </div>

          <form id="booking-form" class="form">
            <!-- STEP 1: Fahrzeug & Leistungen -->
            <div class="booking-step" id="booking-step-1" data-step="1">
              <label class="field-label" for="booking-vehicle-class">Fahrzeugklasse (optional)</label>
              <select id="booking-vehicle-class" class="field-input">
                <option value="">Keine Auswahl</option>
              </select>

              <label class="field-label" for="booking-car">Fahrzeug (optional)</label>
              <input
                id="booking-car"
                type="text"
                class="field-input"
                placeholder="z.B. BMW M3, Kennzeichen"
              />

              <label class="field-label" for="booking-main-service">Paket (optional)</label>
              <select id="booking-main-service" class="field-input">
                <option value="">Kein Paket</option>
              </select>

              <div class="form-hint" style="margin-top:4px;">
                Zus√§tzlich kannst du Einzelleistungen ausw√§hlen.
              </div>

<div class="booking-services-group">
  <h4 class="settings-subtitle">Einzelleistungen</h4>

  <!-- Custom Dropdown mit Checkboxen -->
  <div class="settings-dropdown booking-singles-dropdown">
    <button
      type="button"
      class="settings-dropdown-toggle"
      id="booking-singles-toggle"
    >
      Einzelleistungen w√§hlen
      <span class="settings-dropdown-chevron">‚ñæ</span>
    </button>

    <div
      id="booking-singles-menu"
      class="settings-dropdown-menu"
    >
      <p class="form-hint">Noch keine Einzelleistungen angelegt.</p>
    </div>
  </div>

  <!-- Hidden Multi-Select (Form-/Logik-Basis) -->
  <select id="booking-singles-list" multiple class="hidden"></select>

  <p class="form-hint">Mehrere Einzelleistungen w√§hlbar.</p>
</div>

              <button
                type="button"
                id="booking-next-1"
                class="btn btn-secondary btn-block"
                style="margin-top:16px;"
              >
                Weiter zu Termin
              </button>
            </div>

            <!-- STEP 2: Termin -->
            <div class="booking-step hidden" id="booking-step-2" data-step="2">
              <h4 class="settings-subtitle">Termin</h4>
              <div class="booking-datetime-row">
                <div>
                  <label class="field-label" for="booking-date">Datum</label>
                  <input id="booking-date" type="date" class="field-input" />
                </div>
                <div>
                  <label class="field-label" for="booking-time">Uhrzeit</label>
                  <input id="booking-time" type="time" step="900" class="field-input" />
                  <!-- 900 Sekunden = 15 Minuten -->
                </div>
              </div>

              <div class="booking-step-actions" style="margin-top:16px;">
                <button type="button" id="booking-back-2" class="btn btn-ghost btn-small">
                  Zur√ºck
                </button>
                <button
                  type="button"
                  id="booking-next-2"
                  class="btn btn-secondary btn-small"
                  style="float:right;"
                >
                  Weiter zu Kunde
                </button>
              </div>
            </div>

            <!-- STEP 3: Kunde -->
            <div class="booking-step hidden" id="booking-step-3" data-step="3">
              <h4 class="settings-subtitle">Kunde (optional)</h4>
              <label class="field-label" for="booking-customer-name">Name</label>
              <input id="booking-customer-name" type="text" class="field-input" />

              <label class="field-label" for="booking-customer-email">E-Mail</label>
              <input id="booking-customer-email" type="email" class="field-input" />

              <label class="field-label" for="booking-customer-phone">Telefon</label>
              <input id="booking-customer-phone" type="tel" class="field-input" />

              <label class="field-label" for="booking-customer-address">Adresse</label>
              <input id="booking-customer-address" type="text" class="field-input" />

              <label class="field-label" for="booking-notes">Notizen (optional)</label>
              <textarea id="booking-notes" class="field-input" rows="3"></textarea>

              <h4 class="settings-subtitle" style="margin-top:12px;">Rabatt (optional)</h4>
              <div class="form-row">
                <label class="field-label" for="booking-discount-type">Rabattart</label>
                <select id="booking-discount-type" class="field-input">
                  <option value="none">Kein Rabatt</option>
                  <option value="amount">Betrag (‚Ç¨)</option>
                  <option value="percent">Prozent (%)</option>
                </select>
              </div>

              <div class="form-row">
                <label class="field-label" for="booking-discount-value">Rabattwert</label>
                <input
                  id="booking-discount-value"
                  type="number"
                  class="field-input"
                  placeholder="z.B. 10"
                  step="0.01"
                  min="0"
                />
                <p class="form-hint">
                  Bei Betrag: Euro. Bei Prozent: 0‚Äì100.
                </p>
              </div>

              <div class="booking-step-actions" style="margin-top:16px;">
                <button type="button" id="booking-back-3" class="btn btn-ghost btn-small">
                  Zur√ºck
                </button>
                <button type="submit" class="btn btn-primary btn-small" style="float:right;">
                  Auftrag anlegen
                </button>
              </div>
            </div>

            <!-- Zusammenfassung -->
            <div class="booking-summary glass" style="margin-top:16px; padding:12px;">
              <p><strong>Gesamtpreis:</strong> <span id="booking-summary-price">‚Ç¨ 0,00</span></p>
              <p><strong>Gesamtzeit:</strong> <span id="booking-summary-duration">0 Std.</span></p>
            </div>
          </form>
          <p id="booking-error" class="error-text"></p>
        </div>
      </div>

      <!-- AUFTRAG-DETAIL / BUCHUNG-DETAIL MODAL -->
      <div id="booking-detail-modal" class="profile-modal hidden">
        <div class="profile-modal-backdrop"></div>
        <div class="profile-modal-card glass">
          <div class="profile-modal-header">
            <h3 id="booking-detail-title">Auftrag</h3>
            <button
              id="booking-detail-close"
              class="icon-button small"
              type="button"
              title="Schlie√üen"
            >
              ‚úï
            </button>
          </div>

          <div class="booking-detail-body">
            <!-- Termin + Fahrzeug -->
            <p id="booking-detail-meta"></p>

            <!-- Auftragsvolumen -->
            <p id="booking-detail-price" class="price"></p>

            <!-- BUCHUNGSDETAILS (editierbar) -->
            <details class="modal-section">
              <summary>Buchungsdetails</summary>

  <div class="modal-section">
    <label class="field-label" for="booking-detail-date">Termin</label>
    <div class="booking-datetime-row">
      <div>
        <input
          id="booking-detail-date"
          type="date"
          class="field-input"
        />
      </div>
      <div>
        <input
          id="booking-detail-time"
          type="time"
          step="900"
          class="field-input"
        />
      </div>
    </div>
  </div>

              <div class="modal-section">
                <label class="field-label" for="booking-detail-car">Fahrzeug</label>
                <input
                  id="booking-detail-car"
                  type="text"
                  class="field-input"
                  placeholder="z.B. BMW M3, Kennzeichen"
                />
              </div>

              <div class="modal-section">
                <label class="field-label" for="booking-detail-vehicle-class">
                  Fahrzeugklasse
                </label>
                <select id="booking-detail-vehicle-class" class="field-input">
                  <option value="">Keine Auswahl</option>
                  <!-- Optionen werden per JS geladen -->
                </select>
              </div>

              <div class="modal-section">
                <label class="field-label" for="booking-detail-discount-type">
                  Rabattart
                </label>
                <select id="booking-detail-discount-type" class="field-input">
                  <option value="none">Kein Rabatt</option>
                  <option value="amount">Betrag (‚Ç¨)</option>
                  <option value="percent">Prozent (%)</option>
                </select>
              </div>

              <div class="modal-section">
                <label class="field-label" for="booking-detail-discount-value">
                  Rabattwert
                </label>
                <input
                  id="booking-detail-discount-value"
                  type="number"
                  class="field-input"
                  step="0.01"
                  min="0"
                  placeholder="z.B. 10"
                />
              </div>
            </details>

            <!-- KUNDE (editierbar) -->
            <details class="modal-section">
              <summary>Kunde</summary>

              <div class="modal-section">
                <label class="field-label" for="booking-detail-customer-name">Name</label>
                <input
                  id="booking-detail-customer-name"
                  type="text"
                  class="field-input"
                />
              </div>

              <div class="modal-section">
                <label class="field-label" for="booking-detail-customer-email">E-Mail</label>
                <input
                  id="booking-detail-customer-email"
                  type="email"
                  class="field-input"
                />
              </div>

              <div class="modal-section">
                <label class="field-label" for="booking-detail-customer-phone">Telefon</label>
                <input
                  id="booking-detail-customer-phone"
                  type="tel"
                  class="field-input"
                />
              </div>

              <div class="modal-section">
                <label class="field-label" for="booking-detail-customer-address">Adresse</label>
                <input
                  id="booking-detail-customer-address"
                  type="text"
                  class="field-input"
                />
              </div>
            </details>

            <!-- Notizen -->
            <div class="modal-section">
              <label class="field-label" for="booking-detail-notes">Notizen</label>
              <textarea
                id="booking-detail-notes"
                class="field-input"
                rows="4"
                placeholder="Interne Notizen zum Auftrag"
              ></textarea>
            </div>

            <!-- Status-Bl√∂cke -->
            <div class="modal-section">
              <h4 class="settings-subtitle">Status</h4>

              <label class="field-label" for="booking-detail-job-status">
                Auftragsstatus
              </label>
              <select
                id="booking-detail-job-status"
                class="field-input"
              >
                <option value="planned">Geplant</option>
                <option value="in_progress">In Arbeit</option>
                <option value="done">Abgeschlossen</option>
                <option value="canceled">Storniert</option>
              </select>

              <label
                class="field-label"
                for="booking-detail-payment-status"
                style="margin-top:8px;"
              >
                Zahlungsstatus
              </label>
              <select
                id="booking-detail-payment-status"
                class="field-input"
              >
                <option value="open">Offen</option>
                <option value="partial">Teilzahlung</option>
                <option value="paid">Bezahlt</option>
              </select>
            </div>

              <!-- Teilzahlung: bereits gezahlter Betrag -->
              <div class="modal-section payment-partial-row">
                <label class="field-label" for="booking-detail-partial-amount">
                  Bereits bezahlt (Teilzahlung, in ‚Ç¨)
                </label>
                <input
                  id="booking-detail-partial-amount"
                  type="number"
                  class="field-input"
                  step="0.01"
                  min="0"
                  placeholder="z.B. 100"
                />
              </div>

              <!-- Bezahlt: abweichende Gesamtsumme -->
              <div class="modal-section payment-paid-override-row">
                <label
                  class="field-label"
                  for="booking-detail-paid-override-amount"
                >
                  Abweichende Gesamtsumme (in ‚Ç¨)
                </label>
                <input
                  id="booking-detail-paid-override-amount"
                  type="number"
                  class="field-input"
                  step="0.01"
                  min="0"
                  placeholder="z.B. 299"
                />
                <p class="form-hint">
                  Nur ausf√ºllen, wenn der gezahlte Betrag vom Auftragsvolumen abweicht.
                </p>
              </div>

            <!-- Buttons -->
            <div class="modal-buttons">
              <button
                type="button"
                id="booking-detail-delete-button"
                class="btn btn-danger"
              >
                Auftrag l√∂schen
              </button>
              <button
                type="button"
                id="booking-detail-save"
                class="btn btn-primary"
              >
                √Ñnderungen speichern
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- REVIEW MODAL -->
      <div id="review-modal" class="profile-modal hidden">
        <div class="profile-modal-backdrop"></div>
        <div class="profile-modal-card glass">
          <div class="profile-modal-header">
            <h3>Bewertung anfragen</h3>
            <button
              id="review-modal-close"
              class="icon-button small"
              type="button"
              title="Schlie√üen"
            >
              ‚úï
            </button>
          </div>

          <div class="form">
            <p id="review-modal-text" class="form-hint" style="user-select:text;">
              <!-- Text wird per JS gesetzt -->
            </p>

            <button
              type="button"
              id="review-modal-copy"
              class="btn btn-secondary"
              style="margin-top:12px;"
            >
              Text kopieren
            </button>

            <button
              type="button"
              id="review-modal-done"
              class="btn btn-primary"
              style="margin-top:8px;"
            >
              Erledigt
            </button>
          </div>
        </div>
      </div>

      <!-- BOTTOM NAV -->
      <nav class="bottom-nav glass">
        <button class="nav-item active" data-tab="dashboard">
          <span class="nav-icon">üìä</span>
          <span class="nav-label">Dashboard</span>
        </button>
        <button class="nav-item" data-tab="schedule">
          <span class="nav-icon">üìÖ</span>
          <span class="nav-label">Zeitplan</span>
        </button>
        <button class="nav-item" data-tab="settings">
          <span class="nav-icon">‚öôÔ∏è</span>
          <span class="nav-label">Einstellungen</span>
        </button>
      </nav>
    </div>
  </div>

  <script src="main.js"></script>
</body>
</html>
